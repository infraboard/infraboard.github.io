"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[492],{5484:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>c,toc:()=>s});var t=i(5893),l=i(1151);const o={title:"HTTP\u63a5\u53e3",sidebar_label:"HTTP\u63a5\u53e3"},r=void 0,c={id:"framework/api/http",title:"HTTP\u63a5\u53e3",description:"\u652f\u6301\u7684Web\u6846\u67b6:",source:"@site/docs/framework/api/http.md",sourceDirName:"framework/api",slug:"/framework/api/http",permalink:"/docs/framework/api/http",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/framework/api/http.md",tags:[],version:"current",frontMatter:{title:"HTTP\u63a5\u53e3",sidebar_label:"HTTP\u63a5\u53e3"},sidebar:"framework",previous:{title:"\u6982\u8ff0",permalink:"/docs/framework/api/"},next:{title:"GRPC\u63a5\u53e3",permalink:"/docs/framework/api/grpc"}},a={},s=[{value:"Gin\u6846\u67b6",id:"gin\u6846\u67b6",level:2},{value:"GinApiObject\u63a5\u53e3",id:"ginapiobject\u63a5\u53e3",level:3},{value:"\u5b9e\u73b0\u63a5\u53e3",id:"\u5b9e\u73b0\u63a5\u53e3",level:3},{value:"\u6ce8\u518c\u63a5\u53e3\u5bf9\u8c61",id:"\u6ce8\u518c\u63a5\u53e3\u5bf9\u8c61",level:3},{value:"\u542f\u52a8\u670d\u52a1",id:"\u542f\u52a8\u670d\u52a1",level:3},{value:"GoRestful\u6846\u67b6",id:"gorestful\u6846\u67b6",level:2},{value:"GoRestfulApiObject\u63a5\u53e3",id:"gorestfulapiobject\u63a5\u53e3",level:3},{value:"\u5b9e\u73b0\u63a5\u53e3",id:"\u5b9e\u73b0\u63a5\u53e3-1",level:3},{value:"\u6ce8\u518c\u63a5\u53e3\u5bf9\u8c61",id:"\u6ce8\u518c\u63a5\u53e3\u5bf9\u8c61-1",level:3},{value:"\u542f\u52a8\u670d\u52a1",id:"\u542f\u52a8\u670d\u52a1-1",level:3}];function p(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\u652f\u6301\u7684Web\u6846\u67b6:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Gin"}),"\n",(0,t.jsx)(n.li,{children:"GoRestful(v3)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"gin\u6846\u67b6",children:"Gin\u6846\u67b6"}),"\n",(0,t.jsx)(n.h3,{id:"ginapiobject\u63a5\u53e3",children:"GinApiObject\u63a5\u53e3"}),"\n",(0,t.jsx)(n.p,{children:"\u8981\u7f16\u5199\u4e00\u4e2aGin HTTP API\u6a21\u5757, \u4f60\u9700\u8981\u5b9e\u73b0\u63a5\u53e3: GinApiObject"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"type GinApiObject interface {\n\tObject\n\tRegistry(gin.IRouter)\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u5b9e\u73b0\u63a5\u53e3",children:"\u5b9e\u73b0\u63a5\u53e3"}),"\n",(0,t.jsx)(n.p,{children:"\u4e0b\u9762\u662f\u4e00\u4e2ahello world \u6837\u4f8b HelloServiceApiHandler \u5b9e\u73b0\u4e86GinApiObject\u63a5\u53e3:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'type HelloServiceApiHandler struct {\n\t// \u7ee7\u627f\u81eaIoc\u5bf9\u8c61\n\tioc.ObjectImpl\n}\n\n// \u6a21\u5757\u7684\u540d\u79f0, \u4f1a\u4f5c\u4e3a\u8def\u5f84\u7684\u4e00\u90e8\u5206\u6bd4\u5982: /mcube_service/api/v1/hello_module/\n// \u8def\u5f84\u6784\u6210\u89c4\u5219 <service_name>/<path_prefix>/<service_version>/<module_name>\nfunc (h *HelloServiceApiHandler) Name() string {\n\treturn "hello_module"\n}\n\nfunc (h *HelloServiceApiHandler) Version() string {\n\treturn "v1"\n}\n\n// API\u8def\u7531\nfunc (h *HelloServiceApiHandler) Registry(r gin.IRouter) {\n\tr.GET("/", func(c *gin.Context) {\n\t\tc.JSON(http.StatusOK, gin.H{\n\t\t\t"data": "hello mcube",\n\t\t})\n\t})\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u6ce8\u518c\u63a5\u53e3\u5bf9\u8c61",children:"\u6ce8\u518c\u63a5\u53e3\u5bf9\u8c61"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// \u6ce8\u518cHTTP\u63a5\u53e3\u7c7b\nioc.Api().Registry(&HelloServiceApiHandler{})\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u542f\u52a8\u670d\u52a1",children:"\u542f\u52a8\u670d\u52a1"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// \u542f\u52a8\u5e94\u7528\nerr = application.App().Start(context.Background())\nif err != nil {\n    panic(err)\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u542f\u52a8\u540e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ inforboard/mcube/examples \u2039master*\u203a \xbb go run api.go                                                                                                                    1 \u21b5\n2023-12-14T19:11:40+08:00 INFO   config/application/application.go:103 > loaded configs: [trace.v1 log.v1 app.v1] component:APPLICATION\n2023-12-14T19:11:40+08:00 INFO   config/application/application.go:104 > loaded controllers: [] component:APPLICATION\n2023-12-14T19:11:40+08:00 INFO   config/application/application.go:105 > loaded apis: [hello_module.v1] component:APPLICATION\n[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.\n\n[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.\n - using env:   export GIN_MODE=release\n - using code:  gin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /mcube_service/api/v1/hello_module/ --\x3e main.(*HelloServiceApiHandler).Registry.func1 (3 handlers)\n2023-12-14T19:11:40+08:00 INFO   config/application/http.go:205 > HTTP\u670d\u52a1\u542f\u52a8\u6210\u529f, \u76d1\u542c\u5730\u5740: 127.0.0.1:8080 component:HTTP\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u5b8c\u6574\u7684\u4f8b\u5b50\u8bf7\u67e5\u770b: ",(0,t.jsx)(n.a,{href:"https://github.com/infraboard/mcube/blob/master/examples/http_gin/main.go",children:"gin"})]}),"\n",(0,t.jsx)(n.h2,{id:"gorestful\u6846\u67b6",children:"GoRestful\u6846\u67b6"}),"\n",(0,t.jsx)(n.h3,{id:"gorestfulapiobject\u63a5\u53e3",children:"GoRestfulApiObject\u63a5\u53e3"}),"\n",(0,t.jsx)(n.p,{children:"\u8981\u7f16\u5199\u4e00\u4e2aGo Restful HTTP API\u6a21\u5757, \u4f60\u9700\u8981\u5b9e\u73b0\u63a5\u53e3: GoRestfulApiObject"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"type GoRestfulApiObject interface {\n\tObject\n\tRegistry(*restful.WebService)\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u5b9e\u73b0\u63a5\u53e3-1",children:"\u5b9e\u73b0\u63a5\u53e3"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:'type HelloServiceApiHandler struct {\n\t// \u7ee7\u627f\u81eaIoc\u5bf9\u8c61\n\tioc.ObjectImpl\n}\n\n// \u6a21\u5757\u7684\u540d\u79f0, \u4f1a\u4f5c\u4e3a\u8def\u5f84\u7684\u4e00\u90e8\u5206\u6bd4\u5982: /mcube_service/api/v1/hello_module/\n// \u8def\u5f84\u6784\u6210\u89c4\u5219 <service_name>/<path_prefix>/<service_version>/<module_name>\nfunc (h *HelloServiceApiHandler) Name() string {\n\treturn "hello_module"\n}\n\nfunc (h *HelloServiceApiHandler) Version() string {\n\treturn "v1"\n}\n\n// API\u8def\u7531\nfunc (h *HelloServiceApiHandler) Registry(ws *restful.WebService) {\n\tws.Route(ws.GET("/").To(func(r *restful.Request, w *restful.Response) {\n\t\tw.WriteAsJson(map[string]string{\n\t\t\t"data": "hello mcube",\n\t\t})\n\t}))\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u6ce8\u518c\u63a5\u53e3\u5bf9\u8c61-1",children:"\u6ce8\u518c\u63a5\u53e3\u5bf9\u8c61"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// \u6ce8\u518cHTTP\u63a5\u53e3\u7c7b\nioc.Api().Registry(&HelloServiceApiHandler{})\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u542f\u52a8\u670d\u52a1-1",children:"\u542f\u52a8\u670d\u52a1"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"// \u542f\u52a8\u5e94\u7528\nerr = application.App().Start(context.Background())\nif err != nil {\n    panic(err)\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u901a\u8fc7 API Doc\u7684\u94fe\u63a5 \u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u6ce8\u518c\u7684\u63a5\u53e3:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",children:"$ inforboard/mcube/examples \u2039master\u203a \xbb go run http_go_restful/main.go \n2023-12-18T11:34:52+08:00 INFO   config/application/application.go:106 > loaded configs: [log.v1 app.v1] component:APPLICATION\n2023-12-18T11:34:52+08:00 INFO   config/application/application.go:107 > loaded controllers: [] component:APPLICATION\n2023-12-18T11:34:52+08:00 INFO   config/application/application.go:108 > loaded apis: [hello_module.v1] component:APPLICATION\n2023-12-18T11:34:52+08:00 INFO   config/application/http_gorestful.go:79 > Get the API Doc using http://127.0.0.1:8080/apidocs.json component:GO-RESTFUL\n2023-12-18T11:34:52+08:00 INFO   config/application/http_gorestful.go:86 > \u5065\u5eb7\u68c0\u67e5\u5730\u5740: http://127.0.0.1:8080/healthz component:GO-RESTFUL\n2023-12-18T11:34:52+08:00 INFO   config/application/http.go:236 > HTTP\u670d\u52a1\u542f\u52a8\u6210\u529f, \u76d1\u542c\u5730\u5740: 127.0.0.1:8080 component:HTTP\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5b8c\u6574\u7684\u4f8b\u5b50\u8bf7\u67e5\u770b: ",(0,t.jsx)(n.a,{href:"https://github.com/infraboard/mcube/blob/master/examples/http_go_restful/main.go",children:"gin"})]})]})}function d(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>c,a:()=>r});var t=i(7294);const l={},o=t.createContext(l);function r(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);