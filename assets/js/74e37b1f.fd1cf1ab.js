"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[492],{5484:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>s});var i=t(5893),r=t(1151);const o={title:"HTTP\u63a5\u53e3",sidebar_label:"HTTP\u63a5\u53e3"},a=void 0,c={id:"framework/api/http",title:"HTTP\u63a5\u53e3",description:"\u652f\u6301\u7684Web\u6846\u67b6:",source:"@site/docs/framework/api/http.md",sourceDirName:"framework/api",slug:"/framework/api/http",permalink:"/docs/framework/api/http",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/framework/api/http.md",tags:[],version:"current",frontMatter:{title:"HTTP\u63a5\u53e3",sidebar_label:"HTTP\u63a5\u53e3"},sidebar:"framework",previous:{title:"\u6982\u8ff0",permalink:"/docs/framework/api/"},next:{title:"GRPC\u63a5\u53e3",permalink:"/docs/framework/api/grpc"}},l={},s=[{value:"Gin",id:"gin",level:2},{value:"GoRestful",id:"gorestful",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"\u652f\u6301\u7684Web\u6846\u67b6:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Gin"}),"\n",(0,i.jsx)(n.li,{children:"GoRestful(v3)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"gin",children:"Gin"}),"\n",(0,i.jsx)(n.p,{children:"\u8981\u7f16\u5199\u4e00\u4e2aGin HTTP API\u6a21\u5757, \u4f60\u9700\u8981\u5b9e\u73b0\u63a5\u53e3: GinApiObject"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"type GinApiObject interface {\n\tObject\n\tRegistry(gin.IRouter)\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4e0b\u9762\u662f\u4e00\u4e2ahello world \u6837\u4f8b:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'type HelloServiceApiHandler struct {\n\t// \u7ee7\u627f\u81eaIoc\u5bf9\u8c61\n\tioc.ObjectImpl\n}\n\n// \u6a21\u5757\u7684\u540d\u79f0, \u4f1a\u4f5c\u4e3a\u8def\u5f84\u7684\u4e00\u90e8\u5206\u6bd4\u5982: /mcube_service/api/v1/hello_module/\n// \u8def\u5f84\u6784\u6210\u89c4\u5219 <service_name>/<path_prefix>/<service_version>/<module_name>\nfunc (h *HelloServiceApiHandler) Name() string {\n\treturn "hello_module"\n}\n\nfunc (h *HelloServiceApiHandler) Version() string {\n\treturn "v1"\n}\n\n// API\u8def\u7531\nfunc (h *HelloServiceApiHandler) Registry(r gin.IRouter) {\n\tr.GET("/", func(c *gin.Context) {\n\t\tc.JSON(http.StatusOK, gin.H{\n\t\t\t"data": "hello mcube",\n\t\t})\n\t})\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\u4f60\u9700\u8981\u505a\u7684\u4ec5\u4ec5\u662f\u628a\u6539\u5bf9\u8c61\u6ce8\u518c\u5230ioc\u6846\u67b6\u5185:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"// \u6ce8\u518cHTTP\u63a5\u53e3\u7c7b\nioc.Api().Registry(&HelloServiceApiHandler{})\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u542f\u52a8\u540e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:'$ inforboard/mcube/examples \u2039master*\u203a \xbb go run api.go                                                                                                                    1 \u21b5\n2023-12-14T19:11:40+08:00 INFO   config/application/application.go:103 > loaded configs: [trace.v1 log.v1 app.v1] component:APPLICATION\n2023-12-14T19:11:40+08:00 INFO   config/application/application.go:104 > loaded controllers: [] component:APPLICATION\n2023-12-14T19:11:40+08:00 INFO   config/application/application.go:105 > loaded apis: [hello_module.v1] component:APPLICATION\n[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.\n\n[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.\n - using env:   export GIN_MODE=release\n - using code:  gin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /mcube_service/api/v1/hello_module/ --\x3e main.(*HelloServiceApiHandler).Registry.func1 (3 handlers)\n2023-12-14T19:11:40+08:00 INFO   config/application/http.go:205 > HTTP\u670d\u52a1\u542f\u52a8\u6210\u529f, \u76d1\u542c\u5730\u5740: 127.0.0.1:8080 component:HTTP\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u5b8c\u6574\u7684\u4f8b\u5b50\u8bf7\u67e5\u770b: ",(0,i.jsx)(n.a,{href:"https://github.com/infraboard/mcube/blob/master/examples/http_gin.go",children:"gin"})]}),"\n",(0,i.jsx)(n.h2,{id:"gorestful",children:"GoRestful"})]})}function p(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>a});var i=t(7294);const r={},o=i.createContext(r);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);